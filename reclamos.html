<!DOCTYPE html>
<html lang="es">
<head>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-N66C7HLN');</script>
    <!-- End Google Tag Manager -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Reclamos | Sapiens Digital Lab</title>
    <meta name="description" content="Registra tus reclamos, quejas o sugerencias sobre los servicios de Sapiens Digital Lab. Te responderemos a la brevedad.">
    <meta name="robots" content="noindex, nofollow">
    <link rel="icon" type="image/webp" href="img/favisapiens.webp">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="dns-prefetch" href="https://www.googletagmanager.com">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <style>
      body {
        background:#f5f5f5;
      }
      .reclamos-page {
        max-width: 960px;
        margin: 32px auto 56px auto;
        padding: 0 16px 40px 16px;
      }
      .reclamos-title {
        text-align:center;
        font-size:2rem;
        font-weight:700;
        margin-bottom:16px;
      }
      .reclamos-card {
        background:#ffffff;
        border-radius:18px;
        border:1px solid #e5e7eb;
        padding:28px 26px 28px 26px;
        box-shadow:0 4px 16px rgba(0,0,0,0.05);
      }
      .reclamos-company {
        font-size:0.9rem;
        margin-bottom:8px;
      }
      .reclamos-company strong {
        display:block;
        font-size:1rem;
      }
      .reclamos-top-row {
        display:flex;
        justify-content:space-between;
        align-items:flex-start;
        font-size:0.85rem;
        margin-top:6px;
        margin-bottom:12px;
        gap:16px;
        flex-wrap:wrap;
      }
      .reclamos-top-row span {
        white-space:nowrap;
      }
      .reclamos-section-title {
        font-size:0.95rem;
        font-weight:600;
        margin:14px 0 6px 0;
      }
      .reclamos-row {
        display:flex;
        gap:14px;
        flex-wrap:wrap;
        margin-bottom:10px;
      }
      .reclamos-col {
        flex:1 1 180px;
        min-width:0;
      }
      .reclamos-label {
        display:block;
        font-size:0.85rem;
        margin-bottom:4px;
        color:#444;
      }
      .reclamos-input,
      .reclamos-select,
      .reclamos-textarea {
        width:100%;
        border-radius:8px;
        border:1px solid #ddd;
        padding:9px 11px;
        font-size:0.9rem;
        box-sizing:border-box;
      }
      .reclamos-textarea {
        min-height:110px;
        resize:vertical;
      }
      .reclamos-aviso-menor {
        font-size:0.82rem;
        color:#555;
        background:#fafafa;
        border-radius:6px;
        padding:8px 10px;
        margin:4px 0 10px 0;
      }
      .reclamos-aviso-final {
        font-size:0.75rem;
        color:#777;
        margin-top:8px;
      }
      .reclamos-firma-row {
        display:flex;
        justify-content:space-between;
        align-items:center;
        gap:14px;
        flex-wrap:wrap;
        margin-top:12px;
      }
      .reclamos-banner-wrap {
        width:100%;
        margin:0;
        padding:0;
        position:relative;
      }
      .reclamos-banner {
        width:100%;
        max-width:100%;
        display:block;
      }
      .reclamos-banner-text {
        position:absolute;
        top:50%;
        left:50%;
        transform:translate(-50%, -50%);
        color:#fff;
        text-align:center;
        width:100%;
        z-index:2;
      }
      .reclamos-banner-title {
        font-size:3.5rem;
        font-weight:700;
        margin-bottom:12px;
        text-shadow:0 2px 8px rgba(0,0,0,0.3);
      }
      .reclamos-banner-subtitle {
        font-size:1.5rem;
        font-weight:400;
        text-shadow:0 2px 8px rgba(0,0,0,0.3);
      }
      @media (max-width: 768px) {
        .reclamos-banner-title {
          font-size:2.5rem;
        }
        .reclamos-banner-subtitle {
          font-size:1.2rem;
        }
      }
      .reclamos-btn-row {
        display:flex;
        justify-content:center;
        margin-top:18px;
      }
      .reclamos-btn {
        background:#3AC37B;
        color:#fff;
        border-radius:18px;
        padding:10px 32px;
        font-size:0.98rem;
        border:none;
        font-weight:600;
        cursor:pointer;
        transition:background 0.2s,opacity 0.2s;
      }
      .reclamos-btn:hover {
        background:#2fa36a;
      }
      .reclamos-btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        background:#3AC37B;
      }
      .reclamos-btn:disabled:hover {
        background:#3AC37B;
      }
      /* Terms checkbox styles */
      .terms-checkbox-container {
        margin: 16px 0;
      }
      .terms-checkbox-label {
        display: flex;
        align-items: flex-start;
        gap: 10px;
        font-size: 0.9rem;
        color: #222;
        cursor: pointer;
        line-height: 1.5;
      }
      .terms-checkbox-label input[type="checkbox"] {
        margin-top: 2px;
        cursor: pointer;
        min-width: 18px;
        width: 18px;
        height: 18px;
        flex-shrink: 0;
      }
      .terms-link {
        color: #3AC37B;
        text-decoration: underline;
        font-weight: 500;
      }
      .terms-link:hover {
        color: #2fa36a;
      }
      @media (max-width: 768px) {
        .reclamos-card {
          padding:20px 14px;
        }
        .reclamos-top-row {
          flex-direction:column;
          align-items:flex-start;
        }
      }
    </style>
    <!-- Google Analytics se carga solo con consentimiento del usuario (ver js/cookies.js) -->
</head>
<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-N66C7HLN"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <!-- Header igual que las otras páginas -->
    <header class="header" role="banner">
        <div class="header__logo">
            <a href="index.html"><img src="img/logo-sapiens.webp" alt="Logo Sapiens Digital Lab" width="150" height="38"></a>
        </div>
        <button class="menu-toggle" aria-label="Abrir menú">
          <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
            <rect y="7" width="32" height="3" rx="1.5" fill="#222"/>
            <rect y="14.5" width="32" height="3" rx="1.5" fill="#222"/>
            <rect y="22" width="32" height="3" rx="1.5" fill="#222"/>
          </svg>
        </button>
        <button class="menu-close" aria-label="Cerrar menú">&times;</button>
        <nav class="header__nav" role="navigation" aria-label="Menú principal">
            <ul>
                <li><a href="index.html">Inicio</a></li>
                <li><a href="nosotros.html">Nosotros</a></li>
                <li><a href="oportunidades.html">Oportunidades</a></li>
                <li><a href="contrata-talento.html" class="btn-header btn-contrata-talento">Contrata un talento →</a></li>
            </ul>
        </nav>
        <div class="mobile-menu" aria-label="Menú móvil" tabindex="-1">
          <ul>
            <li><img src="img/logo-sapiens.webp" alt="Logo Sapiens Digital Lab"></li>
            <li><a href="index.html">Inicio</a></li>
            <li><a href="nosotros.html">Nosotros</a></li>
            <li><a href="oportunidades.html">Oportunidades</a></li>
            <li><a href="contrata-talento.html" class="btn-contrata-talento-mobile">Contrata un talento →</a></li>
          </ul>
        </div>
    </header>

    <div class="reclamos-banner-wrap">
      <img src="img/banerreclamos.webp" alt="Libro de reclamaciones" class="reclamos-banner" loading="lazy">
      <div class="reclamos-banner-text">
        <div class="reclamos-banner-title">Libro de reclamos</div>
        <div class="reclamos-banner-subtitle">Escuchamos tus sugerencias y reclamos</div>
      </div>
    </div>

    <main id="main-content">
      <div class="reclamos-page">
        <h1 class="reclamos-title">Completa tus datos</h1>
        <div class="reclamos-card">
          <div class="reclamos-company">
            <strong>Sapiens Digital Sac</strong>
            RUC: 206086401958<br>
            Dirección: AV. LAS CAMELIAS NRO. 877 INT. 302 URB. SANTA CRUZ LIMA - LIMA - SAN ISIDRO
          </div>
          <div class="reclamos-top-row">
            <span>Hoja N° <input class="reclamos-input" id="rec_hoja" name="rec_hoja" type="text" style="width:110px;display:inline-block;" readonly></span>
            <span>Código de identificación: <input class="reclamos-input" id="rec_codigo" name="rec_codigo" type="text" style="width:120px;display:inline-block;" readonly></span>
          </div>

          <form id="reclamoForm">
            <div class="reclamos-section-title">Datos del reclamante</div>
            <div class="reclamos-row">
              <div class="reclamos-col">
                <label class="reclamos-label" for="rec_nombre">Nombre</label>
                <input class="reclamos-input" id="rec_nombre" name="rec_nombre" type="text">
              </div>
              <div class="reclamos-col">
                <label class="reclamos-label" for="rec_apellido">Apellido</label>
                <input class="reclamos-input" id="rec_apellido" name="rec_apellido" type="text">
              </div>
            </div>
            <div class="reclamos-row">
              <div class="reclamos-col">
                <label class="reclamos-label" for="rec_dni">DNI</label>
                <input class="reclamos-input" id="rec_dni" name="rec_dni" type="text">
              </div>
              <div class="reclamos-col">
                <label class="reclamos-label" for="rec_telefono">Número de teléfono</label>
                <input class="reclamos-input" id="rec_telefono" name="rec_telefono" type="text">
              </div>
            </div>
            <div class="reclamos-row">
              <div class="reclamos-col">
                <label class="reclamos-label" for="rec_email">Correo</label>
                <input class="reclamos-input" id="rec_email" name="rec_email" type="text">
              </div>
              <div class="reclamos-col">
                <label class="reclamos-label" for="rec_direccion">Dirección</label>
                <input class="reclamos-input" id="rec_direccion" name="rec_direccion" type="text">
              </div>
            </div>
            <div class="reclamos-row">
              <div class="reclamos-col">
                <label class="reclamos-label" for="rec_ciudad">Ciudad</label>
                <input class="reclamos-input" id="rec_ciudad" name="rec_ciudad" type="text">
              </div>
              <div class="reclamos-col">
                <label class="reclamos-label" for="rec_distrito">Distrito</label>
                <input class="reclamos-input" id="rec_distrito" name="rec_distrito" type="text">
              </div>
            </div>
            <div class="reclamos-row">
              <div class="reclamos-col">
                <label class="reclamos-label" for="rec_fecha_inconveniente">Fecha del inconveniente</label>
                <input class="reclamos-input" id="rec_fecha_inconveniente" name="rec_fecha_inconveniente" type="date">
              </div>
              <div class="reclamos-col">
                <label class="reclamos-label" for="rec_fecha_reclamo">Fecha del reclamo o queja</label>
                <input class="reclamos-input" id="rec_fecha_reclamo" name="rec_fecha_reclamo" type="date">
              </div>
            </div>

            <div class="reclamos-aviso-menor">
              En caso se trate de un menor de edad, llenar con datos de uno de los padres o representantes del menor.
            </div>

            <div class="reclamos-section-title">Datos del padre, madre o representante (si aplica)</div>
            <div class="reclamos-row">
              <div class="reclamos-col">
                <label class="reclamos-label" for="rep_nombre">Nombre</label>
                <input class="reclamos-input" id="rep_nombre" name="rep_nombre" type="text">
              </div>
              <div class="reclamos-col">
                <label class="reclamos-label" for="rep_apellido">Apellido</label>
                <input class="reclamos-input" id="rep_apellido" name="rep_apellido" type="text">
              </div>
            </div>
            <div class="reclamos-row">
              <div class="reclamos-col">
                <label class="reclamos-label" for="rep_dni">DNI</label>
                <input class="reclamos-input" id="rep_dni" name="rep_dni" type="text">
              </div>
              <div class="reclamos-col">
                <label class="reclamos-label" for="rep_telefono">Número de teléfono</label>
                <input class="reclamos-input" id="rep_telefono" name="rep_telefono" type="text">
              </div>
            </div>
            <div class="reclamos-row">
              <div class="reclamos-col">
                <label class="reclamos-label" for="rep_email">Correo</label>
                <input class="reclamos-input" id="rep_email" name="rep_email" type="email">
              </div>
              <div class="reclamos-col">
                <label class="reclamos-label" for="rep_direccion">Dirección</label>
                <input class="reclamos-input" id="rep_direccion" name="rep_direccion" type="text">
              </div>
            </div>
            <div class="reclamos-row">
              <div class="reclamos-col">
                <label class="reclamos-label" for="rep_ciudad">Ciudad</label>
                <input class="reclamos-input" id="rep_ciudad" name="rep_ciudad" type="text">
              </div>
              <div class="reclamos-col">
                <label class="reclamos-label" for="rep_distrito">Distrito</label>
                <input class="reclamos-input" id="rep_distrito" name="rep_distrito" type="text">
              </div>
            </div>

            <div class="reclamos-section-title">Servicio contratado</div>
            <input class="reclamos-input" id="rec_servicio" name="rec_servicio" type="text" placeholder="Adquisición de talento, consultoría, etc.">

            <div class="reclamos-section-title">Detalle su reclamo</div>
            <textarea class="reclamos-textarea" id="rec_detalle" name="rec_detalle" placeholder="Lo sucedido fue..."></textarea>

            <div class="reclamos-section-title">Acciones que tomó la empresa al respecto</div>
            <textarea class="reclamos-textarea" id="rec_acciones" name="rec_acciones" placeholder="Describe las acciones que tomó la empresa, si las hubiera."></textarea>

            <div class="reclamos-section-title">Firma del reclamante</div>
            <div class="reclamos-firma-row">
              <div style="flex:1 1 200px;min-width:0;">
                <label class="reclamos-label" for="rec_firma_texto">Escribe tu nombre completo</label>
                <input class="reclamos-input" id="rec_firma_texto" name="rec_firma_texto" type="text">
              </div>
            </div>

            <div class="reclamos-aviso-final">
              Al enviar este formulario, autorizas el uso de tus datos para contactarte y dar seguimiento a tu solicitud, de acuerdo con nuestra <a href="politica-privacidad.html" target="_blank" style="color: #3AC37B; text-decoration: underline;">política de privacidad</a>.
            </div>

            <div class="terms-checkbox-container">
                <label class="terms-checkbox-label">
                    <input type="checkbox" id="terms-checkbox-reclamo" name="terms">
                    <span>Al hacer clic aquí, declaro que he leído y entendido los <a href="terminos-condiciones.html" target="_blank" rel="noopener" class="terms-link">términos y condiciones</a></span>
                </label>
            </div>

            <div class="reclamos-btn-row">
              <div id="reclamo-error-message" style="display:none;color:#e74c3c;font-size:0.9rem;margin-bottom:12px;text-align:center;font-weight:500;"></div>
              <button class="reclamos-btn" type="submit" id="reclamoSubmit">Enviar</button>
            </div>
          </form>
        </div>
      </div>
    </main>

    <!-- Popup de confirmación estilo tarjeta -->
    <div id="reclamoPopup" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.35);z-index:9999;align-items:center;justify-content:center;">
      <div style="background:linear-gradient(#00C853,#00B0FF);padding:2px;border-radius:18px;max-width:420px;width:90%;box-shadow:0 4px 24px rgba(0,0,0,0.18);">
        <div style="background:#ffffff;border-radius:16px;padding:24px 18px;font-size:1rem;text-align:center;color:#111;">
          <span id="reclamoPopupMsg" style="font-weight:600;display:block;line-height:1.4;">
            Se ha enviado de forma exitosa.<br>Una copia de su queja se ha enviado<br>a su correo electrónico
          </span>
        </div>
      </div>
    </div>

    <!-- Footer igual que index -->
    <div class="footer__main">
      <div class="footer-main-content">
        <div class="footer-main-texto">
          <h2>¿Algún proyecto <br>en mente?</h2>
        </div>
        <div class="footer-main-boton">
          <a href="https://wa.me/51983447481" target="_blank" rel="noopener" class="btn-quiero-conversar">Quiero conversar →</a>
        </div>
      </div>
    </div>
    <div class="footer__bottom">
      <div class="footer__content">
        <div class="footer__col footer__contacto">
          <h5>Contacto</h5>
          <div class="footer__contacto-datos">
            <span><a href="mailto:talento@sapiens.la" style="color: inherit; text-decoration: underline;">talento@sapiens.la</a></span>
            <span><a href="https://wa.me/51913804251" target="_blank" rel="noopener" style="color: inherit; text-decoration: underline;">+51 913804251</a></span>
          </div>
        </div>
      </div>
      <div class="footer__col footer__social-col footer__social-center">
        <h5>Síguenos</h5>
        <div class="footer__social">
          <a href="https://www.linkedin.com/company/sapiens-la" target="_blank"><img src="img/botonlinkedin.webp" alt="LinkedIn" loading="lazy"></a>
          <a href="https://www.instagram.com/sapiens_la/" target="_blank"><img src="img/bottoning.webp" alt="Instagram" loading="lazy"></a>
          <a href="https://www.youtube.com/@SapiensDigitalLab" target="_blank"><img src="img/botonyt.webp" alt="YouTube" loading="lazy"></a>
        </div>
      </div>
      <div class="footer__col footer__reclamos-right">
        <h5>Información Legal y reclamos</h5>
        <div class="footer__reclamos-link">
          <a href="reclamos.html" style="color: inherit; text-decoration: underline;">Libro de reclamaciones</a>
          <a href="terminos-condiciones.html" style="color: inherit; text-decoration: underline;">Términos y condiciones de uso</a>
          <a href="politica-privacidad.html" style="color: inherit; text-decoration: underline;">Política de privacidad y protección de datos</a>
        </div>
      </div>
      <span style="display:block; width:100%; text-align:center; margin-top:24px; color:#222;">© 2025 by Sapiens Digital Lab</span>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
    <script>
    // Inicializar EmailJS cuando esté disponible
    function initEmailJS() {
      if (typeof emailjs !== 'undefined') {
        emailjs.init('Q0_hWQQnnmPEqYRwT');
      } else {
        // Si EmailJS aún no está cargado, intentar de nuevo
        setTimeout(initEmailJS, 100);
      }
    }
    
    // Inicializar EmailJS
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initEmailJS);
    } else {
      initEmailJS();
    }

    function mostrarPopupReclamo(mensaje) {
      const popup = document.getElementById('reclamoPopup');
      const msg = document.getElementById('reclamoPopupMsg');
      if (!popup || !msg) return;
      msg.innerHTML = mensaje;
      popup.style.display = 'flex';
      setTimeout(() => popup.style.display = 'none', 7000);
    }

    // Generar número correlativo de 6 dígitos (000001, 000002, ...)
    function getNextCorrelativo() {
      try {
        const key = 'sapiensReclamoCorrelativo';
        let current = parseInt(localStorage.getItem(key) || '0', 10);
        if (isNaN(current) || current < 0) current = 0;
        const next = current + 1;
        localStorage.setItem(key, String(next));
        return String(next).padStart(6, '0');
      } catch (e) {
        // Si localStorage falla, usar 000001 siempre
        return '000001';
      }
    }

    function inicializarCorrelativos() {
      const hojaInput = document.getElementById('rec_hoja');
      const codigoInput = document.getElementById('rec_codigo');
      if (!hojaInput || !codigoInput) return;
      const correlativo = getNextCorrelativo();
      hojaInput.value = correlativo;
      codigoInput.value = correlativo;
    }

    document.addEventListener('DOMContentLoaded', function() {
      inicializarCorrelativos();

      // Configurar el evento de submit del formulario
      const form = document.getElementById('reclamoForm');
      if (form) {
        form.addEventListener('submit', function(e) {
          // Prevenir el envío del formulario (no cambiar de página)
          e.preventDefault();
          e.stopPropagation();
          
          const formEl = this;
          const btn = document.getElementById('reclamoSubmit');
          const termsCheckbox = document.getElementById('terms-checkbox-reclamo');
          const formErrorMsg = document.getElementById('reclamo-error-message');
          
          // Limpiar mensajes de error previos
          if (formErrorMsg) {
            formErrorMsg.style.display = 'none';
            formErrorMsg.textContent = '';
          }
          
          // VALIDACIÓN: Checkbox de términos y condiciones
          if (!termsCheckbox || !termsCheckbox.checked) {
            const mensajeError = 'Por favor, acepta los términos y condiciones para continuar.';
            if (formErrorMsg) {
              formErrorMsg.textContent = mensajeError;
              formErrorMsg.style.display = 'block';
              // Hacer scroll al mensaje de error para que sea visible
              formErrorMsg.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
            if (termsCheckbox) {
              setTimeout(function() {
                termsCheckbox.focus();
              }, 300);
            }
            return false; // Detener la ejecución aquí
          }
          
          // Si llegamos aquí, no hay errores, proceder con el envío
      
      btn.textContent = 'Enviando...';
      btn.disabled = true;
          
          // Obtener valores de campos fuera del formulario
          const hojaValue = document.getElementById('rec_hoja') ? document.getElementById('rec_hoja').value : '';
          const codigoValue = document.getElementById('rec_codigo') ? document.getElementById('rec_codigo').value : '';
          
          // Obtener valores de campos del formulario
          const recNombre = formEl.rec_nombre ? formEl.rec_nombre.value : '';
          const recApellido = formEl.rec_apellido ? formEl.rec_apellido.value : '';
          const repNombre = formEl.rep_nombre ? formEl.rep_nombre.value : '';
          const repApellido = formEl.rep_apellido ? formEl.rep_apellido.value : '';

          const data = {
            tipo_formulario: 'Reclamo / Queja / Sugerencia',
            origen: 'Formulario Libro de Reclamaciones',
            hoja: hojaValue,
            codigo: codigoValue,
            nombre: (recNombre + ' ' + recApellido).trim(),
            dni: formEl.rec_dni ? formEl.rec_dni.value : '',
            email: formEl.rec_email ? formEl.rec_email.value : '',
            telefono: formEl.rec_telefono ? formEl.rec_telefono.value : '',
            direccion: formEl.rec_direccion ? formEl.rec_direccion.value : '',
            ciudad: formEl.rec_ciudad ? formEl.rec_ciudad.value : '',
            distrito: formEl.rec_distrito ? formEl.rec_distrito.value : '',
            fecha_inconveniente: formEl.rec_fecha_inconveniente ? formEl.rec_fecha_inconveniente.value : '',
            fecha_reclamo: formEl.rec_fecha_reclamo ? formEl.rec_fecha_reclamo.value : '',
            rep_nombre: (repNombre + ' ' + repApellido).trim(),
            rep_dni: formEl.rep_dni ? formEl.rep_dni.value : '',
            rep_email: formEl.rep_email ? formEl.rep_email.value : '',
            rep_telefono: formEl.rep_telefono ? formEl.rep_telefono.value : '',
            rep_direccion: formEl.rep_direccion ? formEl.rep_direccion.value : '',
            rep_ciudad: formEl.rep_ciudad ? formEl.rep_ciudad.value : '',
            rep_distrito: formEl.rep_distrito ? formEl.rep_distrito.value : '',
            servicio: formEl.rec_servicio ? formEl.rec_servicio.value : '',
            detalle: formEl.rec_detalle ? formEl.rec_detalle.value : '',
            acciones: formEl.rec_acciones ? formEl.rec_acciones.value : '',
            firma_texto: formEl.rec_firma_texto ? formEl.rec_firma_texto.value : '',
            especializacion: '',
            linkedin: '',
            empresa: ''
          };

          // Enviar datos a Google Sheets (Reclamos)
          const sheetsRequest = fetch('https://script.google.com/macros/s/AKfycbx4rmXg2H5kAx02vuMv4tGFBy2DVgPi7PRamauJIIyvE0nTMuNZczb2QJam5Ws9vsis/exec', {
            method: 'POST',
            mode: 'no-cors',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
              hoja: data.hoja,
              codigo: data.codigo,
              nombre: data.nombre,
              dni: data.dni,
              email: data.email,
              telefono: data.telefono,
              direccion: data.direccion,
              ciudad: data.ciudad,
              distrito: data.distrito,
              fecha_inconveniente: data.fecha_inconveniente,
              fecha_reclamo: data.fecha_reclamo,
              rep_nombre: data.rep_nombre,
              rep_dni: data.rep_dni,
              rep_email: data.rep_email,
              rep_telefono: data.rep_telefono,
              rep_direccion: data.rep_direccion,
              rep_ciudad: data.rep_ciudad,
              rep_distrito: data.rep_distrito,
              servicio: data.servicio,
              detalle: data.detalle,
              acciones: data.acciones,
              firma_texto: data.firma_texto
            })
            }).catch(() => {});

          // Enviar correo con plantilla de Libro de Reclamaciones
          // Preparar datos para EmailJS según el template proporcionado
          const emailData = {
            hoja: data.hoja,
            codigo: data.codigo,
            nombre: data.nombre,
            dni: data.dni,
            email: data.email,
            telefono: data.telefono,
            direccion: data.direccion,
            ciudad: data.ciudad,
            distrito: data.distrito,
            fecha_inconveniente: data.fecha_inconveniente,
            fecha_reclamo: data.fecha_reclamo,
            rep_nombre: data.rep_nombre || '',
            rep_dni: data.rep_dni || '',
            rep_email: data.rep_email || '',
            rep_telefono: data.rep_telefono || '',
            rep_direccion: data.rep_direccion || '',
            rep_ciudad: data.rep_ciudad || '',
            rep_distrito: data.rep_distrito || '',
            servicio: data.servicio,
            detalle: data.detalle,
            acciones: data.acciones || '',
            firma_texto: data.firma_texto
          };
          
          // Verificar que EmailJS esté disponible antes de enviar
          if (typeof emailjs === 'undefined') {
            mostrarPopupReclamo('Error: El servicio de email no está disponible. Por favor, recarga la página e intenta nuevamente.');
            btn.textContent = 'Enviar';
            btn.disabled = false;
            return false;
          }
          
          const emailRequest = emailjs.send('service_f73qp8z', 'template_aw0qmk9', emailData)
            .then(function(response) {
              console.log('Email enviado exitosamente:', response.status, response.text);
              return response;
            })
            .catch(error => {
              console.error('Error al enviar email:', error);
              throw error;
            });

          Promise.allSettled([sheetsRequest, emailRequest])
            .then(results => {
              const emailResult = results[1];
              if (emailResult.status === 'fulfilled') {
                mostrarPopupReclamo('Se ha enviado de forma exitosa.<br>Una copia de su queja se ha enviado<br>a su correo electrónico');
                formEl.reset();
                inicializarCorrelativos();
                if (termsCheckbox) termsCheckbox.checked = false;
                btn.textContent = 'Enviar';
                btn.disabled = false;
                // Limpiar mensajes de error
                const formErrorMsg = document.getElementById('reclamo-error-message');
                if (formErrorMsg) {
                  formErrorMsg.style.display = 'none';
                  formErrorMsg.textContent = '';
                }
              } else {
                mostrarPopupReclamo('Ocurrió un error al enviar tu reclamo. Intenta nuevamente o escríbenos a Talento@sapiens.la.');
              }
            })
            .catch(() => {
              mostrarPopupReclamo('Ocurrió un error al enviar tu reclamo. Intenta nuevamente o escríbenos a Talento@sapiens.la.');
            })
            .finally(() => {
              btn.textContent = 'Enviar';
              btn.disabled = false;
              // Limpiar mensajes de error del formulario
              const formErrorMsg = document.getElementById('reclamo-error-message');
              if (formErrorMsg) {
                formErrorMsg.style.display = 'none';
                formErrorMsg.textContent = '';
              }
            });
        });
      }
    });


    // Mobile menu
    const menuToggle = document.querySelector('.menu-toggle');
    const menuClose = document.querySelector('.menu-close');
    const mobileMenu = document.querySelector('.mobile-menu');
    const nav = document.querySelector('.header__nav');

    function closeMobileMenu() {
      if (mobileMenu) mobileMenu.style.display = 'none';
      if (menuClose) menuClose.style.display = 'none';
      document.body.style.overflow = '';
    }

    function openMobileMenu() {
      if (mobileMenu) mobileMenu.style.display = 'block';
      if (menuClose) menuClose.style.display = 'block';
      document.body.style.overflow = 'hidden';
    }

    if (menuToggle) menuToggle.addEventListener('click', openMobileMenu);
    if (menuClose) menuClose.addEventListener('click', closeMobileMenu);
    if (mobileMenu) {
      mobileMenu.querySelectorAll('a').forEach(link => {
        link.addEventListener('click', closeMobileMenu);
      });
    }

    function handleResize() {
      if (window.innerWidth <= 600) {
        if (nav) nav.style.display = 'none';
        closeMobileMenu();
      } else {
        if (nav) nav.style.display = 'block';
        if (menuClose) menuClose.style.display = 'none';
        closeMobileMenu();
      }
    }
    window.addEventListener('resize', handleResize);
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', handleResize);
    } else {
      handleResize();
    }
    </script>
    <!-- Cookie Banner -->
    <div id="cookie-banner" role="dialog" aria-label="Política de cookies" aria-live="polite">
      <div class="cookie-banner-content">
        <svg class="cookie-banner-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" fill="#3AC37B"/>
        </svg>
        <div class="cookie-banner-text">
          Utilizamos cookies para mejorar tu experiencia y analizar el tráfico del sitio. Al continuar navegando, aceptas nuestro uso de cookies. 
          <a href="politica-privacidad.html#cookies" id="cookie-settings-link">Más información</a>
        </div>
      </div>
      <div class="cookie-banner-actions">
        <button id="cookie-reject" class="cookie-btn cookie-btn-reject" aria-label="Rechazar cookies">Rechazar</button>
        <button id="cookie-accept" class="cookie-btn cookie-btn-accept" aria-label="Aceptar cookies">Aceptar</button>
      </div>
    </div>
    <!-- Script de gestión de cookies -->
    <script src="js/cookies.js"></script>
</body>
</html>


